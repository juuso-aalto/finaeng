portfolio_values <- portfolio_values / 12
portfolio_errors <- portfolio_errors / 12
plot_ly(z = ~portfolio_values, type = "surface") %>% layout(title="Rehedging frequency 1 day")
print(portfolio_errors)
print(portfolio_values)
}
second_reporting_item()
second_reporting_item <- function () {
total_days <- 80
portfolio_values <- matrix(nrow = total_days, ncol = 10, data = 0)
portfolio_errors <- c(rep(0,10))
for (sheet_no in 1:12) {
data <- read_excel("isx2010C.xls", sheet=sheet_no)
data <- fix_data(data)
data <- strip_data(data)
greeks <- calculate_greeks(data)
total_days <- length(data$daystomaturity)
for (i in 1:(length(data) - 4)) {
ret <- single_delta_hedge(data, greeks, i, 1)
portfolio_values[1:total_days, i] <- portfolio_values[1:total_days, i] + ret$portfolio_value
portfolio_errors[i] <- portfolio_errors[i] + ret$mean_error_squared
}
}
portfolio_values <- portfolio_values / 12
portfolio_errors <- portfolio_errors / 12
plot_ly(z = ~portfolio_values, type = "surface") %>% layout(title="Rehedging frequency 1 day")
print(portfolio_errors)
print(portfolio_values)
}
second_reporting_item()
second_reporting_item <- function () {
total_days <- 80
portfolio_values <- matrix(nrow = total_days, ncol = 10, data = 0)
portfolio_errors <- c(rep(0,10))
for (sheet_no in 1:12) {
data <- read_excel("isx2010C.xls", sheet=sheet_no)
data <- fix_data(data)
data <- strip_data(data)
greeks <- calculate_greeks(data)
total_days <- length(data$daystomaturity)
for (i in 1:(length(data) - 4)) {
ret <- single_delta_hedge(data, greeks, i, 2)
portfolio_values[1:total_days, i] <- portfolio_values[1:total_days, i] + ret$portfolio_value
portfolio_errors[i] <- portfolio_errors[i] + ret$mean_error_squared
}
}
portfolio_values <- portfolio_values / 12
portfolio_errors <- portfolio_errors / 12
plot_ly(z = ~portfolio_values, type = "surface") %>% layout(title="Rehedging frequency 1 day")
print(portfolio_errors)
print(portfolio_values)
}
second_reporting_item()
second_reporting_item <- function () {
total_days <- 80
portfolio_values <- matrix(nrow = total_days, ncol = 10, data = 0)
portfolio_errors <- c(rep(0,10))
for (sheet_no in 1:12) {
data <- read_excel("isx2010C.xls", sheet=sheet_no)
data <- fix_data(data)
data <- strip_data(data)
greeks <- calculate_greeks(data)
total_days <- length(data$daystomaturity)
for (i in 1:(length(data) - 4)) {
ret <- single_delta_hedge(data, greeks, i, 7)
portfolio_values[1:total_days, i] <- portfolio_values[1:total_days, i] + ret$portfolio_value
portfolio_errors[i] <- portfolio_errors[i] + ret$mean_error_squared
}
}
portfolio_values <- portfolio_values / 12
portfolio_errors <- portfolio_errors / 12
plot_ly(z = ~portfolio_values, type = "surface") %>% layout(title="Rehedging frequency 1 day")
print(portfolio_errors)
print(portfolio_values)
}
second_reporting_item()
fifth_reporting_item <- function () {
sheet_no <- 1
data <- read_excel("isx2010C.xls", sheet=sheet_no)
data <- fix_data(data)
data <- strip_data(data)
greeks <- calculate_greeks(data)
print("Strike; Mean error squared; Total change")
total_days <- length(data$daystomaturity)
portfolio_values <- matrix(nrow = total_days, ncol = length(data) - 4, data = 0)
portfolio_errors <- matrix(nrow = total_days, ncol = length(data) - 4, data = 0)
count <- 0
for (i in 1:10) {
for (j in 1:10) {
if (j > i) {
count <- count + 1
print(paste(i, j))
ret <- single_delta_gamma_hedge(data, greeks, 7, i, j)
portfolio_values[1:total_days, i] <- portfolio_values[1:total_days, i] + ret$portfolio_value
portfolio_errors[1:total_days, i] <- portfolio_errors[1:total_days, i] + ret$mean_error_squared
}
}
}
portfolio_values[1:total_days, i] <- portfolio_values[1:total_days, i] / count
portfolio_errors[1:total_days, i] <- portfolio_errors[1:total_days, i] / count
plot_ly(z = ~portfolio_values, type = "surface") %>% layout(title="Rehedging frequency 7 day")
print(portfolio_values)
print(portfolio_errors)
}
fifth_reporting_item()
fifth_reporting_item <- function () {
sheet_no <- 1
data <- read_excel("isx2010C.xls", sheet=sheet_no)
data <- fix_data(data)
data <- strip_data(data)
greeks <- calculate_greeks(data)
print("Strike; Mean error squared; Total change")
total_days <- length(data$daystomaturity)
portfolio_values <- matrix(nrow = total_days, ncol = length(data) - 4, data = 0)
portfolio_errors <- matrix(nrow = total_days, ncol = length(data) - 4, data = 0)
count <- 0
for (i in 1:10) {
for (j in 1:10) {
if (j > i) {
count <- count + 1
print(paste(i, j))
ret <- single_delta_gamma_hedge(data, greeks, 2, i, j)
portfolio_values[1:total_days, i] <- portfolio_values[1:total_days, i] + ret$portfolio_value
portfolio_errors[1:total_days, i] <- portfolio_errors[1:total_days, i] + ret$mean_error_squared
}
}
}
portfolio_values[1:total_days, i] <- portfolio_values[1:total_days, i] / count
portfolio_errors[1:total_days, i] <- portfolio_errors[1:total_days, i] / count
plot_ly(z = ~portfolio_values, type = "surface") %>% layout(title="Rehedging frequency 7 day")
print(portfolio_values)
print(portfolio_errors)
}
fifth_reporting_item()
Q=matrix(1:3, nrow = 3, ncol = 3)
Q
U=matrix(1:3, nrow = 3, ncol = 3)
U
Q+U
fifth_reporting_item <- function () {
total_days <- 80
portfolio_values1 <- matrix(nrow = total_days, ncol = 10, data = 0)
portfolio_errors1 <- matrix(nrow = total_days, ncol = 10, data = 0)
for (sheet_no in 1:12){
portfolio_values <- matrix(nrow = total_days, ncol = 10, data = 0)
portfolio_errors <- matrix(nrow = total_days, ncol = 10, data = 0)
data <- read_excel("isx2010C.xls", sheet=sheet_no)
data <- fix_data(data)
data <- strip_data(data)
greeks <- calculate_greeks(data)
print("Strike; Mean error squared; Total change")
total_days <- length(data$daystomaturity)
count <- 0
for (i in 1:10) {
for (j in 1:10) {
if (j > i) {
count <- count + 1
ret <- single_delta_gamma_hedge(data, greeks, 1, i, j)
portfolio_values[1:total_days, i] <- portfolio_values[1:total_days, i] + ret$portfolio_value
portfolio_errors[1:total_days, i] <- portfolio_errors[1:total_days, i] + ret$mean_error_squared
}
}
}
portfolio_values[1:total_days, i] <- portfolio_values[1:total_days, i] / count
portfolio_errors[1:total_days, i] <- portfolio_errors[1:total_days, i] / count
portfolio_values1 <- portfolio_values1 + portfolio_values
portfolio_errors1 <- portfolio_errors1 + portfolio_errors
}
portfolio_values1 <- portfolio_values1 / 12
portfolio_errors1 <- portfolio_errors1 / 12
plot_ly(z = ~portfolio_values1, type = "surface") %>% layout(title="Rehedging frequency 7 day")
print(portfolio_values1)
print(portfolio_errors1)
}
fifth_reporting_item()
fifth_reporting_item <- function () {
total_days <- 80
portfolio_values1 <- matrix(nrow = total_days, ncol = 10, data = 0)
portfolio_errors1 <- matrix(nrow = total_days, ncol = 10, data = 0)
for (sheet_no in 1:12){
portfolio_values <- matrix(nrow = total_days, ncol = 10, data = 0)
portfolio_errors <- matrix(nrow = total_days, ncol = 10, data = 0)
data <- read_excel("isx2010C.xls", sheet=sheet_no)
data <- fix_data(data)
data <- strip_data(data)
greeks <- calculate_greeks(data)
print("Strike; Mean error squared; Total change")
total_days <- length(data$daystomaturity)
count <- 0
for (i in 1:10) {
for (j in 1:10) {
if (j > i) {
count <- count + 1
ret <- single_delta_gamma_hedge(data, greeks, 2, i, j)
portfolio_values[1:total_days, i] <- portfolio_values[1:total_days, i] + ret$portfolio_value
portfolio_errors[1:total_days, i] <- portfolio_errors[1:total_days, i] + ret$mean_error_squared
}
}
}
portfolio_values[1:total_days, i] <- portfolio_values[1:total_days, i] / count
portfolio_errors[1:total_days, i] <- portfolio_errors[1:total_days, i] / count
portfolio_values1 <- portfolio_values1 + portfolio_values
portfolio_errors1 <- portfolio_errors1 + portfolio_errors
}
portfolio_values1 <- portfolio_values1 / 12
portfolio_errors1 <- portfolio_errors1 / 12
plot_ly(z = ~portfolio_values1, type = "surface") %>% layout(title="Rehedging frequency 7 day")
print(portfolio_values1)
print(portfolio_errors1)
}
fifth_reporting_item()
fifth_reporting_item <- function () {
total_days <- 80
portfolio_values1 <- matrix(nrow = total_days, ncol = 10, data = 0)
portfolio_errors1 <- matrix(nrow = total_days, ncol = 10, data = 0)
for (sheet_no in 1:12){
portfolio_values <- matrix(nrow = total_days, ncol = 10, data = 0)
portfolio_errors <- matrix(nrow = total_days, ncol = 10, data = 0)
data <- read_excel("isx2010C.xls", sheet=sheet_no)
data <- fix_data(data)
data <- strip_data(data)
greeks <- calculate_greeks(data)
print("Strike; Mean error squared; Total change")
total_days <- length(data$daystomaturity)
count <- 0
for (i in 1:10) {
for (j in 1:10) {
if (j > i) {
count <- count + 1
ret <- single_delta_gamma_hedge(data, greeks, 7, i, j)
portfolio_values[1:total_days, i] <- portfolio_values[1:total_days, i] + ret$portfolio_value
portfolio_errors[1:total_days, i] <- portfolio_errors[1:total_days, i] + ret$mean_error_squared
}
}
}
portfolio_values[1:total_days, i] <- portfolio_values[1:total_days, i] / count
portfolio_errors[1:total_days, i] <- portfolio_errors[1:total_days, i] / count
portfolio_values1 <- portfolio_values1 + portfolio_values
portfolio_errors1 <- portfolio_errors1 + portfolio_errors
}
portfolio_values1 <- portfolio_values1 / 12
portfolio_errors1 <- portfolio_errors1 / 12
plot_ly(z = ~portfolio_values1, type = "surface") %>% layout(title="Rehedging frequency 7 day")
print(portfolio_values1)
print(portfolio_errors1)
}
fifth_reporting_item()
fifth_reporting_item <- function () {
total_days <- 80
portfolio_values1 <- matrix(nrow = total_days, ncol = 10, data = 0)
portfolio_errors1 <- matrix(nrow = total_days, ncol = 10, data = 0)
for (sheet_no in 1:12){
portfolio_values <- matrix(nrow = total_days, ncol = 10, data = 0)
portfolio_errors <- matrix(nrow = total_days, ncol = 10, data = 0)
data <- read_excel("isx2010C.xls", sheet=sheet_no)
data <- fix_data(data)
data <- strip_data(data)
greeks <- calculate_greeks(data)
print("Strike; Mean error squared; Total change")
total_days <- length(data$daystomaturity)
count <- 0
for (i in 1:10) {
for (j in 1:10) {
if (j > i) {
count <- count + 1
ret <- single_delta_gamma_hedge(data, greeks, 1, i, j)
portfolio_values[1:total_days, i] <- portfolio_values[1:total_days, i] + ret$portfolio_value
portfolio_errors[1:total_days, i] <- portfolio_errors[1:total_days, i] + ret$mean_error_squared
}
}
}
portfolio_values[1:total_days, i] <- portfolio_values[1:total_days, i] / count
portfolio_errors[1:total_days, i] <- portfolio_errors[1:total_days, i] / count
portfolio_values1 <- portfolio_values1 + portfolio_values
portfolio_errors1 <- portfolio_errors1 + portfolio_errors
}
portfolio_values1 <- portfolio_values1 / 12
portfolio_errors1 <- portfolio_errors1 / 12
plot_ly(z = ~portfolio_values1, type = "surface") %>% layout(title="Rehedging frequency 7 day")
print(portfolio_values1)
print(portfolio_errors1)
}
fifth_reporting_item()
plot_ly(z = ~portfolio_values1, type = "surface") %>% layout(title="Rehedging frequency 7 day")
print(portfolio_values1)
fifth_reporting_item <- function () {
total_days <- 80
portfolio_values1 <- matrix(nrow = total_days, ncol = 10, data = 0)
portfolio_errors1 <- matrix(nrow = total_days, ncol = 10, data = 0)
for (sheet_no in 1:12){
portfolio_values <- matrix(nrow = total_days, ncol = 10, data = 0)
portfolio_errors <- matrix(nrow = total_days, ncol = 10, data = 0)
data <- read_excel("isx2010C.xls", sheet=sheet_no)
data <- fix_data(data)
data <- strip_data(data)
greeks <- calculate_greeks(data)
print("Strike; Mean error squared; Total change")
total_days <- length(data$daystomaturity)
count <- 0
for (i in 1:10) {
for (j in 1:10) {
if (j > i) {
count <- count + 1
ret <- single_delta_gamma_hedge(data, greeks, 7, i, j)
portfolio_values[1:total_days, i] <- portfolio_values[1:total_days, i] + ret$portfolio_value
portfolio_errors[1:total_days, i] <- portfolio_errors[1:total_days, i] + ret$mean_error_squared
}
}
}
portfolio_values[1:total_days, i] <- portfolio_values[1:total_days, i] / count
portfolio_errors[1:total_days, i] <- portfolio_errors[1:total_days, i] / count
portfolio_values1 <- portfolio_values1 + portfolio_values
portfolio_errors1 <- portfolio_errors1 + portfolio_errors
}
portfolio_values1 <- portfolio_values1 / 12
portfolio_errors1 <- portfolio_errors1 / 12
plot_ly(z = ~portfolio_values1, type = "surface") %>% layout(title="Rehedging frequency 7 day")
print(portfolio_values1)
print(portfolio_errors1)
}
fifth_reporting_item()
fifth_reporting_item <- function () {
total_days <- 80
portfolio_values1 <- matrix(nrow = total_days, ncol = 10, data = 0)
portfolio_errors1 <- matrix(nrow = total_days, ncol = 10, data = 0)
for (sheet_no in 1:12){
portfolio_values <- matrix(nrow = total_days, ncol = 10, data = 0)
portfolio_errors <- matrix(nrow = total_days, ncol = 10, data = 0)
data <- read_excel("isx2010C.xls", sheet=sheet_no)
data <- fix_data(data)
data <- strip_data(data)
greeks <- calculate_greeks(data)
total_days <- length(data$daystomaturity)
count <- 0
for (i in 1:10) {
for (j in 1:10) {
if (j > i) {
count <- count + 1
ret <- single_delta_gamma_hedge(data, greeks, 7, i, j)
portfolio_values[1:total_days, i] <- portfolio_values[1:total_days, i] + ret$portfolio_value
portfolio_errors[1:total_days, i] <- portfolio_errors[1:total_days, i] + ret$mean_error_squared
}
}
}
portfolio_values[1:total_days, i] <- portfolio_values[1:total_days, i] / count
portfolio_errors[1:total_days, i] <- portfolio_errors[1:total_days, i] / count
portfolio_values1 <- portfolio_values1 + portfolio_values
portfolio_errors1 <- portfolio_errors1 + portfolio_errors
}
portfolio_values1 <- portfolio_values1 / 12
portfolio_errors1 <- portfolio_errors1 / 12
plot_ly(z = ~portfolio_values1, type = "surface") %>% layout(title="Rehedging frequency 7 day")
}
fiftgh
fifth_reporting_item()
fifth_reporting_item()
library(readxl)
library(RQuantLib)
library(plotly)
fifth_reporting_item()
fifth_reporting_item <- function () {
total_days <- 80
portfolio_values1 <- matrix(nrow = total_days, ncol = 10, data = 0)
portfolio_errors1 <- matrix(nrow = total_days, ncol = 10, data = 0)
for (sheet_no in 1:12){
portfolio_values <- matrix(nrow = total_days, ncol = 10, data = 0)
portfolio_errors <- matrix(nrow = total_days, ncol = 10, data = 0)
data <- read_excel("isx2010C.xls", sheet=sheet_no)
data <- fix_data(data)
data <- strip_data(data)
greeks <- calculate_greeks(data)
total_days <- length(data$daystomaturity)
count <- 0
for (i in 1:10) {
for (j in 1:10) {
if (j > i) {
count <- count + 1
ret <- single_delta_gamma_hedge(data, greeks, 2, i, j)
portfolio_values[1:total_days, i] <- portfolio_values[1:total_days, i] + ret$portfolio_value
portfolio_errors[1:total_days, i] <- portfolio_errors[1:total_days, i] + ret$mean_error_squared
}
}
}
portfolio_values[1:total_days, i] <- portfolio_values[1:total_days, i] / count
portfolio_errors[1:total_days, i] <- portfolio_errors[1:total_days, i] / count
portfolio_values1 <- portfolio_values1 + portfolio_values
portfolio_errors1 <- portfolio_errors1 + portfolio_errors
}
portfolio_values1 <- portfolio_values1 / 12
portfolio_errors1 <- portfolio_errors1 / 12
plot_ly(z = ~portfolio_values1, type = "surface") %>% layout(title="Rehedging frequency 7 day")
}
fifth_reporting_item()
fifth_reporting_item <- function () {
total_days <- 80
portfolio_values1 <- matrix(nrow = total_days, ncol = 10, data = 0)
portfolio_errors1 <- matrix(nrow = total_days, ncol = 10, data = 0)
for (sheet_no in 1:12){
portfolio_values <- matrix(nrow = total_days, ncol = 10, data = 0)
portfolio_errors <- matrix(nrow = total_days, ncol = 10, data = 0)
data <- read_excel("isx2010C.xls", sheet=sheet_no)
data <- fix_data(data)
data <- strip_data(data)
greeks <- calculate_greeks(data)
total_days <- length(data$daystomaturity)
count <- 0
for (i in 1:10) {
for (j in 1:10) {
if (j > i) {
count <- count + 1
ret <- single_delta_gamma_hedge(data, greeks, 1, i, j)
portfolio_values[1:total_days, i] <- portfolio_values[1:total_days, i] + ret$portfolio_value
portfolio_errors[1:total_days, i] <- portfolio_errors[1:total_days, i] + ret$mean_error_squared
}
}
}
portfolio_values[1:total_days, i] <- portfolio_values[1:total_days, i] / count
portfolio_errors[1:total_days, i] <- portfolio_errors[1:total_days, i] / count
portfolio_values1 <- portfolio_values1 + portfolio_values
portfolio_errors1 <- portfolio_errors1 + portfolio_errors
}
portfolio_values1 <- portfolio_values1 / 12
portfolio_errors1 <- portfolio_errors1 / 12
plot_ly(z = ~portfolio_values1, type = "surface") %>% layout(title="Rehedging frequency 7 day")
}
fifth_reporting_item()
second_reporting_item <- function () {
total_days <- 80
portfolio_values <- matrix(nrow = total_days, ncol = 10, data = 0)
portfolio_errors <- c(rep(0,10))
for (sheet_no in 1:12) {
data <- read_excel("isx2010C.xls", sheet=sheet_no)
data <- fix_data(data)
data <- strip_data(data)
greeks <- calculate_greeks(data)
total_days <- length(data$daystomaturity)
for (i in 1:(length(data) - 4)) {
ret <- single_delta_hedge(data, greeks, i, 1)
portfolio_values[1:total_days, i] <- portfolio_values[1:total_days, i] + ret$portfolio_value
portfolio_errors[i] <- portfolio_errors[i] + ret$mean_error_squared
}
}
portfolio_values <- portfolio_values / 12
portfolio_errors <- portfolio_errors / 12
plot_ly(z = ~portfolio_values, type = "surface") %>% layout(title="Rehedging frequency 1 day")
print(portfolio_errors)
print(portfolio_values)
}
second_reporting_item()
second_reporting_item <- function () {
total_days <- 80
portfolio_values <- matrix(nrow = total_days, ncol = 10, data = 0)
portfolio_errors <- c(rep(0,10))
for (sheet_no in 1:12) {
data <- read_excel("isx2010C.xls", sheet=sheet_no)
data <- fix_data(data)
data <- strip_data(data)
greeks <- calculate_greeks(data)
total_days <- length(data$daystomaturity)
for (i in 1:(length(data) - 4)) {
ret <- single_delta_hedge(data, greeks, i, 1)
portfolio_values[1:total_days, i] <- portfolio_values[1:total_days, i] + ret$portfolio_value
portfolio_errors[i] <- portfolio_errors[i] + ret$mean_error_squared
}
}
portfolio_values <- portfolio_values / 12
portfolio_errors <- portfolio_errors / 12
plot_ly(z = ~portfolio_values, type = "surface") %>% layout(title="Rehedging frequency 1 day")
}
second_reporting_item()
second_reporting_item <- function () {
total_days <- 80
portfolio_values <- matrix(nrow = total_days, ncol = 10, data = 0)
portfolio_errors <- c(rep(0,10))
for (sheet_no in 1:12) {
data <- read_excel("isx2010C.xls", sheet=sheet_no)
data <- fix_data(data)
data <- strip_data(data)
greeks <- calculate_greeks(data)
total_days <- length(data$daystomaturity)
for (i in 1:(length(data) - 4)) {
ret <- single_delta_hedge(data, greeks, i, 2)
portfolio_values[1:total_days, i] <- portfolio_values[1:total_days, i] + ret$portfolio_value
portfolio_errors[i] <- portfolio_errors[i] + ret$mean_error_squared
}
}
portfolio_values <- portfolio_values / 12
portfolio_errors <- portfolio_errors / 12
plot_ly(z = ~portfolio_values, type = "surface") %>% layout(title="Rehedging frequency 1 day")
}
second_reporting_item()
second_reporting_item <- function () {
total_days <- 80
portfolio_values <- matrix(nrow = total_days, ncol = 10, data = 0)
portfolio_errors <- c(rep(0,10))
for (sheet_no in 1:12) {
data <- read_excel("isx2010C.xls", sheet=sheet_no)
data <- fix_data(data)
data <- strip_data(data)
greeks <- calculate_greeks(data)
total_days <- length(data$daystomaturity)
for (i in 1:(length(data) - 4)) {
ret <- single_delta_hedge(data, greeks, i, 7)
portfolio_values[1:total_days, i] <- portfolio_values[1:total_days, i] + ret$portfolio_value
portfolio_errors[i] <- portfolio_errors[i] + ret$mean_error_squared
}
}
portfolio_values <- portfolio_values / 12
portfolio_errors <- portfolio_errors / 12
plot_ly(z = ~portfolio_values, type = "surface") %>% layout(title="Rehedging frequency 1 day")
}
second_reporting_item()
